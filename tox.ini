[tox]
envlist = py35,py36,py37,lint,docs,minimal,isort-check
[testenv]
deps=
  pytest
  pytest-coverage
  pytest-asyncio
  aioresponses
  dataclasses
  aiohttp
  requests
commands=pytest --cov={envsitepackagesdir}/snug --cov-branch --cov-fail-under 100
[testenv:minimal]
deps=
  pytest
  dataclasses
commands=pytest
[testenv:py35]
deps=
  pytest
  pytest-coverage
  pytest-asyncio
  aioresponses
commands=pytest --ignore tests/test_load.py
[testenv:lint]
skip_install=True
deps=flake8
commands=flake8 snug tests
[testenv:isort-check]
skip_install=True
deps=isort
commands=isort -rc -c snug
[testenv:docs]
basepython=python3.5
changedir=docs
deps= -rrequirements/docs.txt
commands=
    sphinx-build -W -b html -d {envtmpdir}/doctrees .  {envtmpdir}/html
[coverage:run]
branch=True
[coverage:report]
exclude_lines=
  pragma: no cover
  raise NotImplementedError
